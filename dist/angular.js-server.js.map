{"version":3,"sources":["webpack:///webpack/bootstrap 9ac2f794345829e2854c","webpack:///./src/index.ts","webpack:///./src/factory/httpInterceptorQueue.ts","webpack:///./src/decorator/log.ts","webpack:///./src/decorator/exceptionHandler.ts","webpack:///./src/factory/engineQueue.ts","webpack:///./src/decorator/q2.ts","webpack:///./src/factory/Counter.ts","webpack:///./src/provider/timeoutValue.ts","webpack:///./src/decorator/cacheFactory.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;;;;;;AChED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AC5BA;AACA;AACA;AACA,kCAAiC,yCAAyC;AAC1E,kGAAiG;AACjG;AACA,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,uBAAuB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD","file":"dist/angular.js-server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9ac2f794345829e2854c\n **/","\"use strict\";\nvar httpInterceptorQueue_1 = require('./factory/httpInterceptorQueue');\nvar log_1 = require('./decorator/log');\nvar exceptionHandler_1 = require('./decorator/exceptionHandler');\nvar engineQueue_1 = require('./factory/engineQueue');\nvar q2_1 = require('./decorator/q2');\nvar Counter_1 = require('./factory/Counter');\nvar timeoutValue_1 = require('./provider/timeoutValue');\nvar cacheFactory_1 = require('./decorator/cacheFactory');\nangular.module('server', [])\n    .provider('timeoutValue', timeoutValue_1.default)\n    .factory('counter', ['$rootScope', '$log', 'engineQueue', 'timeoutValue', Counter_1.default])\n    .factory('engineQueue', ['$log', '$rootScope', '$window', engineQueue_1.default])\n    .factory('httpInterceptorQueue', ['$q', '$log', 'counter', httpInterceptorQueue_1.default])\n    .decorator('$q', ['$delegate', 'counter', q2_1.default])\n    .decorator('$exceptionHandler', ['$delegate', '$window', exceptionHandler_1.default])\n    .decorator('$log', ['$delegate', '$window', log_1.default])\n    .decorator('$cacheFactory', ['$delegate', cacheFactory_1.CacheFactory])\n    .decorator('$templateCache', ['$cacheFactory', cacheFactory_1.TemplateCache])\n    .provider('cacheFactoryConfig', cacheFactory_1.CacheFactoryConfig)\n    .config(function ($httpProvider) {\n    $httpProvider.interceptors.push('httpInterceptorQueue');\n    console.debug('The Client is in the config() ');\n})\n    .run(function ($rootScope, $log, $window, $timeout, $http, $cacheFactory, cacheFactoryConfig, timeoutValue, counter) {\n    if (typeof $window.clientTimeoutValue === 'number') {\n        timeoutValue.set($window.clientTimeoutValue);\n    }\n    else {\n        timeoutValue.set(200);\n    }\n    var httpCouter = counter.create('http');\n    var qCounter = counter.create('q');\n    var digestCounter = counter.create('digest', function () {\n        $log.dev('run', 'digestWatcher cleanup', digestWatcher);\n        digestWatcher();\n    });\n    $timeout(function () {\n        $rootScope.$apply(function () {\n            $log.dev('index.ts', 'touching http and q');\n            httpCouter.touch();\n            qCounter.touch();\n        });\n    }, timeoutValue.get());\n    var digestWatcher = $rootScope.$watch(function () {\n        counter.incr('digest');\n        $rootScope.$$postDigest(function () {\n            counter.decr('digest');\n        });\n    });\n    $http.defaults.cache = true;\n    if ($window.onServer && $window.onServer === true) {\n        $window.$cacheFactory = $cacheFactory;\n    }\n    if (typeof $window.onServer === 'undefined' && typeof $window.$angularServerCache !== 'undefined') {\n        $cacheFactory.importAll($window.$angularServerCache);\n        var defaultCache = cacheFactoryConfig.getDefaultCache();\n        $rootScope.$on('InternIdle', function () {\n            if (defaultCache === false) {\n                $cacheFactory.delete('$http');\n                $http.defaults.cache = defaultCache;\n            }\n        });\n    }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.ts\n ** module id = 0\n ** module chunks = 0\n **/","'use strict';\nvar _this = this;\nvar HttpInterceptorQueue = function ($q, $log, counter) {\n    $log.dev('HttpInterceptor', 'instanciated', _this);\n    var hCounter = counter.create('http');\n    return {\n        request: function (config) {\n            $log.dev('httpRequest', config.url);\n            hCounter.incr();\n            return $q.when(config);\n        },\n        requestError: function (rejection) {\n            hCounter.decr();\n            return $q.reject(rejection);\n        },\n        response: function (response) {\n            $log.dev('httpResponse', response.config.url);\n            hCounter.decr();\n            return $q.when(response);\n        },\n        responseError: function (response) {\n            $log.dev('httpResponse', response.config.url);\n            hCounter.decr();\n            return $q.reject(response);\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = HttpInterceptorQueue;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/httpInterceptorQueue.ts\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\nvar _this = this;\nvar logDecorator = function ($delegate, $window) {\n    var isDef = function (name) { return angular.isDefined($window[name]); };\n    if (isDef('onServer') && isDef('fs') && isDef('logConfig') && $window['onServer'] === true) { }\n    else {\n        $delegate.dev = function () { };\n        return $delegate;\n    }\n    var fs = $window['fs'];\n    var config = $window['logConfig'];\n    var timer = Date.now();\n    var formatMsg = function () {\n        var str = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            str[_i - 0] = arguments[_i];\n        }\n        var date = new Date();\n        return date + \" -> \" + str.join(' ') + '\\n';\n    };\n    var devLog = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        var time = Date.now() - timer;\n        timer = Date.now();\n        var name = args.shift();\n        args.unshift(name + '+' + time);\n        fs.appendFile(config.dir + '/dev', args.join(', ') + '\\n', function (err) {\n            if (err)\n                throw err;\n        });\n        console.debug.apply(_this, args);\n    };\n    var newLog = Object.create($delegate);\n    newLog.prototype = $delegate.prototype;\n    ['log', 'warn', 'info', 'error', 'debug'].forEach(function (item) {\n        if (config[item].enabled) {\n            newLog[item] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i - 0] = arguments[_i];\n                }\n                var msg = formatMsg.apply(this, args);\n                if (config[item].stack === true) {\n                    var err = new Error();\n                    var stack = err['stack'];\n                    msg += stack + '\\n\\n';\n                }\n                fs.appendFile(config.dir + '/' + item + '.log', msg, function (err) {\n                    if (err)\n                        throw err;\n                });\n                return new Object();\n            };\n        }\n        else {\n            newLog[item] = $delegate[item];\n        }\n    });\n    newLog['dev'] = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        if ($window['serverDebug'] === true) {\n            if ($window.serverDebug === true && args[0] !== 'digest') {\n                devLog.apply(null, args);\n            }\n            else if (typeof $window.serverDebug.digest === 'boolean' && $window.serverDebug.digest === true) {\n                devLog.apply(null, args);\n            }\n        }\n    };\n    return newLog;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = logDecorator;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/log.ts\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\nvar ExceptionHandler = function ($delegate, $window) {\n    var errorHandler = function (error, cause) {\n        var err = new Error();\n        var stack = err['stack'];\n        var errorEvent = new $window.CustomEvent('ServerExceptionHandler');\n        errorEvent.details = {\n            exception: error,\n            cause: cause,\n            err: stack\n        };\n        $window.dispatchEvent(errorEvent);\n        return $delegate(error, cause);\n    };\n    return errorHandler;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = ExceptionHandler;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/exceptionHandler.ts\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\nvar EngineQueue = function ($log, $rootScope, $window) {\n    var doneVar = {};\n    var setStatus = function (name, value) {\n        if (isDone) {\n            return;\n        }\n        doneVar[name] = value;\n        if (value === true) {\n            done(name);\n        }\n    };\n    var isDone = false;\n    var areDoneVarAllTrue = function () {\n        for (var key in doneVar) {\n            if (!doneVar[key]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    var done = function (from) {\n        $log.dev('engineQueue.isDone()', from, doneVar);\n        if (isDone) {\n            return isDone;\n        }\n        if (areDoneVarAllTrue()) {\n            isDone = true;\n            var Event_1 = $window['Event'];\n            var dispatchEvent_1 = $window.dispatchEvent;\n            var IdleEvent = new Event_1('Idle');\n            dispatchEvent_1(IdleEvent);\n            $rootScope.$broadcast('InternIdle');\n        }\n        return isDone;\n    };\n    return {\n        isDone: done,\n        setStatus: setStatus\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = EngineQueue;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/engineQueue.ts\n ** module id = 4\n ** module chunks = 0\n **/","'use strict';\nvar Q = function ($delegate, counter) {\n    var qCounter = counter.create('q');\n    var proto = $delegate.prototype;\n    var Odefer = $delegate.defer;\n    var Oreject = $delegate.reject;\n    var Orace = $delegate.race;\n    var Oall = $delegate.all;\n    var Oresolve = $delegate.resolve;\n    var deferFn = function (context) {\n        return function () {\n            var deferred = Odefer.apply(context, []);\n            var originalDeferResolve = deferred.resolve;\n            deferred.resolve = function () {\n                qCounter.decr();\n                return originalDeferResolve.apply(deferred, arguments);\n            };\n            var originalDeferReject = deferred.reject;\n            deferred.reject = function () {\n                qCounter.decr();\n                return originalDeferReject.apply(deferred, arguments);\n            };\n            qCounter.incr();\n            return deferred;\n        };\n    };\n    var $Q = function (resolver) {\n        if (typeof resolver !== 'function') {\n            throw new Error('norslvr - Expected resolverFn, got - resolver');\n        }\n        var deferred = deferFn(this)();\n        function resolveFn(value) {\n            deferred.resolve(value);\n        }\n        function rejectFn(reason) {\n            deferred.reject(reason);\n        }\n        resolver(resolveFn, rejectFn);\n        return deferred.promise;\n    };\n    $Q.prototype = proto;\n    $Q.defer = deferFn($delegate);\n    $Q.reject = $delegate.reject;\n    $Q.when = $delegate.when;\n    $Q.resolve = Oresolve;\n    $Q.all = Oall;\n    $Q.race = Orace;\n    return $Q;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Q;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/q2.ts\n ** module id = 5\n ** module chunks = 0\n **/","\"use strict\";\nvar CounterFactory = function ($rootScope, $log, engineQueue, timeoutValue) {\n    var counters = {};\n    var createCounter = function (name, doneCB) {\n        if (!doneCB) {\n            doneCB = function () {\n            };\n        }\n        if (typeof $rootScope.counters === 'undefined') {\n            $rootScope.counters = {};\n        }\n        $rootScope.counters[name] = 0;\n        $log.dev('counter', 'creating counter', name);\n        if (typeof counters[name] !== 'undefined') {\n            return counters[name];\n        }\n        counters[name] = new Counter(name, doneCB, $rootScope, engineQueue, timeoutValue.get(), $log);\n        return counters[name];\n    };\n    var incr = function (name) {\n        $rootScope.counters[name]++;\n        counters[name].incr();\n    };\n    var decr = function (name) {\n        $rootScope.counters[name]--;\n        counters[name].decr();\n    };\n    var getCount = function (name) {\n        return counters[name].getCount();\n    };\n    var touch = function (name) {\n        counters[name].touch();\n    };\n    var get = function (name) {\n        return counters[name];\n    };\n    return {\n        create: createCounter,\n        incr: incr,\n        decr: decr,\n        getCount: getCount,\n        touch: touch,\n        get: get\n    };\n};\nvar Counter = (function () {\n    function Counter(name, doneCB, $rootScope, engineQueue, TimeoutValue, $log) {\n        var _this = this;\n        this.name = name;\n        this.doneCB = doneCB;\n        this.$rootScope = $rootScope;\n        this.engineQueue = engineQueue;\n        this.TimeoutValue = TimeoutValue;\n        this.$log = $log;\n        this.untouched = true;\n        this.timer = Date.now();\n        this.getCount = function () {\n            return _this.count;\n        };\n        this.isDone = function () {\n            return _this.done;\n        };\n        this.clearTimeout = function () {\n            if (typeof _this.timeout !== 'undefined') {\n                _this.timeout = window.clearTimeout(_this.timeout);\n                _this.$log.dev(_this.name, 'Timeout cleared', _this.timeout);\n            }\n        };\n        this.touch = function () {\n            _this.$log.dev('Counter ' + _this.name, 'is getting touched');\n            if (_this.untouched === true) {\n                _this.$log.dev('Counter ' + _this.name, 'has been touched', _this.untouched, _this.getCount());\n                _this.engineQueue.setStatus(_this.name, true);\n                _this.untouched = false;\n                _this.triggerIdle();\n            }\n            else {\n                _this.$log.dev('Counter ' + _this.name, 'wont get touched', _this.untouched, _this.getCount());\n            }\n        };\n        this.incr = function () {\n            _this.untouched = false;\n            if (_this.done) {\n                return;\n            }\n            _this.count++;\n            _this.$log.dev(_this.name, 'Incrementing counter ', _this.count);\n            _this.engineQueue.setStatus(_this.name, false);\n            _this.clearTimeout();\n        };\n        this.decr = function () {\n            if (_this.done) {\n                return;\n            }\n            _this.count--;\n            _this.$log.dev(_this.name, 'Decrementing counter ', _this.count);\n            _this.engineQueue.setStatus(_this.name, false);\n            _this.clearTimeout();\n            if (_this.count === 0) {\n                _this.triggerIdle();\n            }\n        };\n        this.triggerIdle = function () {\n            _this.clearTimeout();\n            _this.$log.dev(_this.name, 'triggerIdle called', _this.count, _this.TimeoutValue);\n            _this.timeout = setTimeout(function () {\n                if (_this.count === 0) {\n                    _this.$log.dev(_this.name, 'setting the doneVar to true', _this.count);\n                    _this.engineQueue.setStatus(_this.name, true);\n                    if (_this.engineQueue.isDone()) {\n                        _this.done = true;\n                        _this.$log.dev(_this.name, 'calling CB()');\n                        _this.doneCB();\n                    }\n                }\n                else {\n                    _this.$log.dev(_this.name, 'triggerIdle cancelled ', _this.count);\n                    _this.engineQueue.setStatus(_this.name, false);\n                }\n            }, _this.TimeoutValue);\n            _this.$log.dev(_this.name, 'timeout set to', _this.timeout);\n        };\n        this.done = false;\n        this.count = 0;\n        this.engineQueue.setStatus(this.name, false);\n        $log.dev('counter', 'constructor called', this.name);\n    }\n    return Counter;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = CounterFactory;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/Counter.ts\n ** module id = 6\n ** module chunks = 0\n **/","\"use strict\";\nvar TimeoutValueProvider = (function () {\n    function TimeoutValueProvider() {\n        var _this = this;\n        this.setTimeoutValue = function (value) {\n            _this.timeoutValue = value;\n        };\n        this.$get = function () {\n            return {\n                set: function (value) {\n                    _this.setTimeoutValue(value);\n                },\n                get: function () {\n                    return _this.timeoutValue;\n                }\n            };\n        };\n        this.timeoutValue = 200;\n    }\n    return TimeoutValueProvider;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = TimeoutValueProvider;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/provider/timeoutValue.ts\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\nvar CacheData = (function () {\n    function CacheData(name) {\n        var _this = this;\n        this.name = name;\n        this.set = function (key) {\n            _this.data[key] = Date.now();\n        };\n        this.has = function (key) {\n            return typeof _this.data[key] !== 'undefined';\n        };\n        this.delete = function (key) {\n            if (_this.has(key)) {\n                delete _this.data[key];\n            }\n        };\n        this.keys = function () {\n            return _this.data;\n        };\n        this.empty = function () {\n            _this.data = {};\n        };\n        this.data = {};\n    }\n    return CacheData;\n}());\nexports.CacheFactory = function ($delegate) {\n    var caches = {};\n    var $cacheFactory = function (cacheId, options) {\n        var cache;\n        try {\n            cache = $delegate(cacheId, options);\n        }\n        catch (e) {\n            cache = $delegate.get(cacheId);\n        }\n        var Oput = cache.put;\n        var Oremove = cache.remove;\n        cache.put = function (key, value) {\n            caches[cacheId].set(key);\n            Oput.apply(cache, [key, value]);\n        };\n        cache.remove = function (key) {\n            caches[cacheId].delete(key);\n            Oremove.apply(cache, [key]);\n        };\n        caches[cacheId] = new CacheData(cacheId);\n        return cache;\n    };\n    $cacheFactory.prototype = $delegate.prototype;\n    $cacheFactory.export = function (cacheId) {\n        if (typeof caches[cacheId] === 'undefined') {\n            throw new Error('$cacheFactory - iid - CacheId ' + cacheId + ' is not defined!');\n        }\n        var data = {};\n        var cache = caches[cacheId];\n        var storedCache = $delegate.get(cacheId);\n        var keys = cache.keys();\n        for (var key in keys) {\n            data[key] = storedCache.get(key);\n        }\n        return data;\n    };\n    $cacheFactory.exportAll = function () {\n        var data = {};\n        for (var cacheId in caches) {\n            data[cacheId] = $cacheFactory.export(cacheId);\n        }\n        return data;\n    };\n    $cacheFactory.import = function (cacheId, data) {\n        if (typeof caches[cacheId] === 'undefined') {\n            $cacheFactory(cacheId, {});\n        }\n        var storedCache = $delegate.get(cacheId);\n        for (var key in data) {\n            storedCache.put(key, data[key]);\n        }\n    };\n    $cacheFactory.importAll = function (data) {\n        for (var key in data) {\n            $cacheFactory.import(key, data[key]);\n        }\n    };\n    $cacheFactory.delete = function (cacheId) {\n        if (typeof caches[cacheId] !== 'undefined') {\n            var storedCache = $delegate.get(cacheId);\n            storedCache.removeAll();\n            storedCache.destroy();\n            delete caches[cacheId];\n        }\n    };\n    $cacheFactory.get = $delegate.get;\n    $cacheFactory.info = $delegate.info;\n    return $cacheFactory;\n};\nexports.TemplateCache = function ($cacheFactory) {\n    return $cacheFactory('templates');\n};\nvar CacheFactoryConfig = (function () {\n    function CacheFactoryConfig() {\n        var _this = this;\n        this.$get = function () {\n            return {\n                setDefaultCache: function (value) {\n                    _this.defaultCache = value;\n                },\n                getDefaultCache: function () {\n                    return _this.defaultCache;\n                }\n            };\n        };\n        this.defaultCache = true;\n    }\n    return CacheFactoryConfig;\n}());\nexports.CacheFactoryConfig = CacheFactoryConfig;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/cacheFactory.ts\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}