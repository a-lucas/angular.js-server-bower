{"version":3,"sources":["webpack:///webpack/bootstrap 76755613945d1877afbb","webpack:///./src/index.ts","webpack:///./src/factory/httpInterceptorQueue.ts","webpack:///./src/decorator/log.ts","webpack:///./src/factory/engineQueue.ts","webpack:///./src/decorator/q2.ts","webpack:///./src/factory/Counter.ts","webpack:///./src/decorator/cacheFactory.ts","webpack:///./src/factory/serverConfig.ts","webpack:///./src/factory/Socket.ts","webpack:///./src/decorator/exceptionHandler.ts","webpack:///./src/decorator/templateRequest.ts","webpack:///./src/factory/windowError.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;;;;;;;AChED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,uBAAuB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,6BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA,qCAAoC,uBAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,uBAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,iCAAgC,GAAG,mCAAmC;AACtE;AACA,6BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D","file":"dist/ng1-server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 76755613945d1877afbb\n **/","\"use strict\";\nvar httpInterceptorQueue_1 = require('./factory/httpInterceptorQueue');\nvar log_1 = require('./decorator/log');\nvar engineQueue_1 = require('./factory/engineQueue');\nvar q2_1 = require('./decorator/q2');\nvar Counter_1 = require('./factory/Counter');\nvar cacheFactory_1 = require('./decorator/cacheFactory');\nvar serverConfig_1 = require('./factory/serverConfig');\nvar Socket_1 = require('./factory/Socket');\nvar exceptionHandler_1 = require('./decorator/exceptionHandler');\nvar templateRequest_1 = require('./decorator/templateRequest');\nvar windowError_1 = require('./factory/windowError');\nangular.module('server', [])\n    .factory('serverConfigHelper', ['$window', serverConfig_1.default])\n    .factory('counter', ['$rootScope', '$log', 'engineQueue', 'serverConfigHelper', Counter_1.default])\n    .factory('engineQueue', ['$log', '$rootScope', '$window', '$cacheFactory', 'socket', 'serverConfigHelper', engineQueue_1.default])\n    .factory('socket', ['$window', 'serverConfigHelper', Socket_1.default])\n    .factory('httpInterceptorQueue', ['$q', '$log', 'engineQueue', 'serverConfigHelper', 'counter', httpInterceptorQueue_1.default])\n    .factory('windowError', ['$rootScope', '$window', 'serverConfigHelper', windowError_1.default])\n    .decorator('$exceptionHandler', ['$delegate', '$log', '$window', exceptionHandler_1.default])\n    .decorator('$q', ['$delegate', 'counter', q2_1.default])\n    .decorator('$log', ['$delegate', 'socket', 'serverConfigHelper', log_1.default])\n    .decorator('$cacheFactory', ['$delegate', cacheFactory_1.CacheFactory])\n    .decorator('$templateCache', ['$cacheFactory', cacheFactory_1.TemplateCache])\n    .decorator('$templateRequest', ['$delegate', '$sce', 'serverConfigHelper', templateRequest_1.default])\n    .config(function ($httpProvider) {\n    $httpProvider.interceptors.push('httpInterceptorQueue');\n})\n    .run(function ($rootScope, socket, $log, $timeout, $http, $cacheFactory, windowError, serverConfigHelper, counter) {\n    windowError.init();\n    serverConfigHelper.init();\n    if (serverConfigHelper.hasRestCache()) {\n        $cacheFactory.importAll(serverConfigHelper.getRestCache());\n        $http.defaults.cache = true;\n    }\n    if (serverConfigHelper.onServer() == true) {\n        $http.defaults.cache = true;\n        socket.init();\n    }\n    var httpCouter = counter.create('http');\n    var qCounter = counter.create('q');\n    var digestCounter = counter.create('digest', function () {\n        $log.dev('run', 'digestWatcher cleanup', digestWatcher);\n        digestWatcher();\n    });\n    $timeout(function () {\n        $rootScope.$apply(function () {\n            $log.dev('index.ts', 'touching http and q');\n            httpCouter.touch();\n            qCounter.touch();\n        });\n    }, serverConfigHelper.getTimeoutValue());\n    var digestWatcher = $rootScope.$watch(function () {\n        counter.incr('digest');\n        $rootScope.$$postDigest(function () {\n            counter.decr('digest');\n        });\n    });\n    if (serverConfigHelper.hasRestCache() && serverConfigHelper.getDefaultHttpCache() === false) {\n        $rootScope.$on('InternIdle', function () {\n            $http.defaults.cache = false;\n        });\n    }\n    ;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.ts\n ** module id = 0\n ** module chunks = 0\n **/","'use strict';\nvar _this = this;\nvar HttpInterceptorQueue = function ($q, $log, engineQueue, serverConfigHelper, counter) {\n    $log.dev('HttpInterceptor', 'instanciated', _this);\n    var hCounter = counter.create('http');\n    var cacheMapping = {};\n    return {\n        request: function (config) {\n            $log.dev('before decorator -> httpRequest', config.url);\n            hCounter.incr();\n            var restURL = serverConfigHelper.getRestServer();\n            if (restURL !== null && config.url.indexOf(restURL) === -1) {\n                if (serverConfigHelper.onServer() || serverConfigHelper.getRestCacheEnabled()) {\n                    config.url = restURL\n                        + '/get?url='\n                        + encodeURIComponent(config.url);\n                }\n            }\n            if (serverConfigHelper.onServer() && window['ngIdle'] === false) {\n                if (config.cache) {\n                    var cacheName = config.cache.info();\n                    cacheMapping[config.url] = cacheName.id;\n                }\n                else {\n                    cacheMapping[config.url] = '$http';\n                }\n            }\n            $log.dev('after decorator -> httpRequest', config.url);\n            $log.dev('cacheMapping = ', cacheMapping);\n            return $q.when(config);\n        },\n        requestError: function (rejection) {\n            hCounter.decr();\n            return $q.reject(rejection);\n        },\n        response: function (response) {\n            if (response.headers('ngservercached') === 'yes' && window['ngIdle'] === false) {\n                engineQueue.addDependency(response.config.url, cacheMapping[response.config.url]);\n            }\n            $log.dev('httpResponse', response.config.url);\n            hCounter.decr();\n            return $q.when(response);\n        },\n        responseError: function (response) {\n            $log.dev('httpResponse', response.config.url);\n            hCounter.decr();\n            return $q.reject(response);\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = HttpInterceptorQueue;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/httpInterceptorQueue.ts\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\nvar logDecorator = function ($delegate, socket, serverConfigHelper) {\n    serverConfigHelper.init();\n    var newLog = Object.create($delegate);\n    newLog.prototype = $delegate.prototype;\n    ['log', 'warn', 'info', 'error', 'debug'].forEach(function (item) {\n        if (serverConfigHelper.onServer()) {\n            newLog[item] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i - 0] = arguments[_i];\n                }\n                var log = {\n                    type: item,\n                    args: args\n                };\n                socket.emit('LOG', log);\n            };\n        }\n        else {\n            newLog[item] = $delegate[item];\n        }\n    });\n    if (serverConfigHelper.getDebug() === true) {\n        var timer_1 = Date.now();\n        var devLog_1 = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i - 0] = arguments[_i];\n            }\n            var time = Date.now() - timer_1;\n            timer_1 = Date.now();\n            var name = args.shift();\n            args.unshift(name + '+' + time + 'ms ');\n            return args;\n        };\n        newLog['dev'] = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i - 0] = arguments[_i];\n            }\n            if (serverConfigHelper.onServer()) {\n                newLog.dev = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i - 0] = arguments[_i];\n                    }\n                    var log = {\n                        type: 'trace',\n                        args: devLog_1(args)\n                    };\n                    socket.emit('LOG', log);\n                };\n            }\n            else {\n                newLog.dev = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i - 0] = arguments[_i];\n                    }\n                    return $delegate.debug.apply(null, devLog_1(args));\n                };\n            }\n        };\n    }\n    else {\n        newLog['dev'] = function () { };\n    }\n    return newLog;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = logDecorator;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/log.ts\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\nvar EngineQueue = function ($log, $rootScope, $window, $cacheFactory, socket, serverConfigHelper) {\n    var doneVar = {};\n    var dependencies = {};\n    var addDependency = function (url, cacheId) {\n        if (typeof dependencies[cacheId] === 'undefined') {\n            dependencies[cacheId] = [];\n        }\n        dependencies[cacheId].push(url);\n    };\n    $window['ngIdle'] = false;\n    $rootScope.exception = false;\n    $window.addEventListener('ExceptionHandler', function () {\n        $rootScope.exception = true;\n    });\n    var setStatus = function (name, value) {\n        if (isDone) {\n            return;\n        }\n        doneVar[name] = value;\n        if (value === true) {\n            done(name);\n        }\n    };\n    var isDone = false;\n    var areDoneVarAllTrue = function () {\n        for (var key in doneVar) {\n            if (!doneVar[key]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    var getExportedCache = function () {\n        var exportedCache = {};\n        var _loop_1 = function(cacheId) {\n            exportedCache[cacheId] = {};\n            var cachedUrls = $cacheFactory.export(cacheId);\n            dependencies[cacheId].forEach(function (cachedUrl) {\n                if (serverConfigHelper.getRestCacheEnabled()) {\n                    exportedCache[cacheId][cachedUrl] = cachedUrls[cachedUrl];\n                }\n                else {\n                    var cacheServerURL = serverConfigHelper.getRestServer() + '/get?url=';\n                    if (cachedUrl.indexOf(cacheServerURL) === 0) {\n                        var decodedCachedUrl = decodeURIComponent(cachedUrl.replace(cacheServerURL, ''));\n                        exportedCache[cacheId][decodedCachedUrl] = cachedUrls[cachedUrl];\n                    }\n                    else {\n                        throw new Error('Something unlogical hapens here');\n                    }\n                }\n            });\n        };\n        for (var cacheId in dependencies) {\n            _loop_1(cacheId);\n        }\n        return exportedCache;\n    };\n    var done = function (from) {\n        $log.dev('engineQueue.isDone()', from, doneVar);\n        if (isDone) {\n            return isDone;\n        }\n        if (areDoneVarAllTrue() && $rootScope.exception === false) {\n            isDone = true;\n            $window['ngIdle'] = true;\n            if (serverConfigHelper.onServer() === true) {\n                var doctype = void 0;\n                try {\n                    doctype = new XMLSerializer().serializeToString(document.doctype);\n                }\n                catch (e) {\n                    $log.warn('There is no doctype associated to this document');\n                    doctype = '';\n                }\n                socket.emit('IDLE', {\n                    html: document.documentElement.outerHTML,\n                    doctype: doctype,\n                    url: window.location.href,\n                    exportedCache: getExportedCache()\n                });\n                socket.on('IDLE' + serverConfigHelper.getUID(), function () {\n                    var Event = $window['Event'];\n                    var dispatchEvent = $window.dispatchEvent;\n                    var IdleEvent = new Event('Idle');\n                    dispatchEvent(IdleEvent);\n                    $rootScope.$broadcast('InternIdle');\n                });\n            }\n            else {\n                if (serverConfigHelper.hasRestCache() && serverConfigHelper.getDefaultHttpCache() === false) {\n                    $cacheFactory.delete('$http');\n                }\n                var Event_1 = $window['Event'];\n                var dispatchEvent_1 = $window.dispatchEvent;\n                var IdleEvent = new Event_1('Idle');\n                dispatchEvent_1(IdleEvent);\n                $rootScope.$broadcast('InternIdle');\n            }\n        }\n        return isDone;\n    };\n    return {\n        isDone: done,\n        setStatus: setStatus,\n        addDependency: addDependency\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = EngineQueue;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/engineQueue.ts\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\nvar Q = function ($delegate, counter) {\n    var qCounter = counter.create('q');\n    var proto = $delegate.prototype;\n    var Odefer = $delegate.defer;\n    var Oreject = $delegate.reject;\n    var Orace = $delegate.race;\n    var Oall = $delegate.all;\n    var Oresolve = $delegate.resolve;\n    var deferFn = function (context) {\n        return function () {\n            var deferred = Odefer.apply(context, []);\n            var originalDeferResolve = deferred.resolve;\n            deferred.resolve = function () {\n                qCounter.decr();\n                return originalDeferResolve.apply(deferred, arguments);\n            };\n            var originalDeferReject = deferred.reject;\n            deferred.reject = function () {\n                qCounter.decr();\n                return originalDeferReject.apply(deferred, arguments);\n            };\n            qCounter.incr();\n            return deferred;\n        };\n    };\n    function get$Q() {\n        var $Q = function (resolver) {\n            if (typeof resolver !== 'function') {\n                throw new Error('norslvr - Expected resolverFn, got - resolver');\n            }\n            var deferred = deferFn(this)();\n            function resolveFn(value) {\n                deferred.resolve(value);\n            }\n            function rejectFn(reason) {\n                deferred.reject(reason);\n            }\n            resolver(resolveFn, rejectFn);\n            return deferred.promise;\n        };\n        $Q.prototype = proto;\n        $Q.defer = deferFn($delegate);\n        $Q.reject = $delegate.reject;\n        $Q.when = $delegate.when;\n        $Q.resolve = Oresolve;\n        $Q.all = Oall;\n        $Q.race = Orace;\n        return $Q;\n    }\n    return get$Q();\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Q;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/q2.ts\n ** module id = 4\n ** module chunks = 0\n **/","\"use strict\";\nvar CounterFactory = function ($rootScope, $log, engineQueue, serverConfigHelper) {\n    serverConfigHelper.init();\n    var counters = {};\n    var createCounter = function (name, doneCB) {\n        if (!doneCB) {\n            doneCB = function () {\n            };\n        }\n        if (typeof $rootScope.counters === 'undefined') {\n            $rootScope.counters = {};\n        }\n        $rootScope.counters[name] = 0;\n        $log.dev('counter', 'creating counter', name);\n        if (typeof counters[name] !== 'undefined') {\n            return counters[name];\n        }\n        counters[name] = new Counter(name, doneCB, $rootScope, engineQueue, serverConfigHelper.getTimeoutValue(), $log);\n        return counters[name];\n    };\n    var incr = function (name) {\n        $rootScope.counters[name]++;\n        counters[name].incr();\n    };\n    var decr = function (name) {\n        $rootScope.counters[name]--;\n        counters[name].decr();\n    };\n    var getCount = function (name) {\n        return counters[name].getCount();\n    };\n    var touch = function (name) {\n        counters[name].touch();\n    };\n    var get = function (name) {\n        return counters[name];\n    };\n    return {\n        create: createCounter,\n        incr: incr,\n        decr: decr,\n        getCount: getCount,\n        touch: touch,\n        get: get\n    };\n};\nvar Counter = (function () {\n    function Counter(name, doneCB, $rootScope, engineQueue, TimeoutValue, $log) {\n        var _this = this;\n        this.name = name;\n        this.doneCB = doneCB;\n        this.$rootScope = $rootScope;\n        this.engineQueue = engineQueue;\n        this.TimeoutValue = TimeoutValue;\n        this.$log = $log;\n        this.untouched = true;\n        this.timer = Date.now();\n        this.getCount = function () {\n            return _this.count;\n        };\n        this.isDone = function () {\n            return _this.done;\n        };\n        this.clearTimeout = function () {\n            if (typeof _this.timeout !== 'undefined') {\n                _this.timeout = window.clearTimeout(_this.timeout);\n                _this.$log.dev(_this.name, 'Timeout cleared', _this.timeout);\n            }\n        };\n        this.touch = function () {\n            _this.$log.dev('Counter ' + _this.name, 'is getting touched');\n            if (_this.untouched === true) {\n                _this.$log.dev('Counter ' + _this.name, 'has been touched', _this.untouched, _this.getCount());\n                _this.engineQueue.setStatus(_this.name, true);\n                _this.untouched = false;\n                _this.triggerIdle();\n            }\n            else {\n                _this.$log.dev('Counter ' + _this.name, 'wont get touched', _this.untouched, _this.getCount());\n            }\n        };\n        this.incr = function () {\n            _this.untouched = false;\n            if (_this.done) {\n                return;\n            }\n            _this.count++;\n            _this.$log.dev(_this.name, 'Incrementing counter ', _this.count);\n            _this.engineQueue.setStatus(_this.name, false);\n            _this.clearTimeout();\n        };\n        this.decr = function () {\n            if (_this.done) {\n                return;\n            }\n            _this.count--;\n            _this.$log.dev(_this.name, 'Decrementing counter ', _this.count);\n            _this.engineQueue.setStatus(_this.name, false);\n            _this.clearTimeout();\n            if (_this.count === 0) {\n                _this.triggerIdle();\n            }\n        };\n        this.done = false;\n        this.count = 0;\n        this.engineQueue.setStatus(this.name, false);\n        $log.dev('counter', 'constructor called', this.name);\n    }\n    Counter.prototype.triggerIdle = function () {\n        var _this = this;\n        this.clearTimeout();\n        this.$log.dev(this.name, 'triggerIdle called', this.count, this.TimeoutValue);\n        this.timeout = setTimeout(function () {\n            if (_this.count === 0) {\n                _this.$log.dev(_this.name, 'setting the doneVar to true', _this.count);\n                _this.engineQueue.setStatus(_this.name, true);\n                if (_this.engineQueue.isDone()) {\n                    _this.done = true;\n                    _this.$log.dev(_this.name, 'calling CB()');\n                    _this.doneCB();\n                }\n            }\n            else {\n                _this.$log.dev(_this.name, 'triggerIdle cancelled ', _this.count);\n                _this.engineQueue.setStatus(_this.name, false);\n            }\n        }, this.TimeoutValue);\n        this.$log.dev(this.name, 'timeout set to', this.timeout);\n    };\n    ;\n    return Counter;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = CounterFactory;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/Counter.ts\n ** module id = 5\n ** module chunks = 0\n **/","'use strict';\nvar CacheData = (function () {\n    function CacheData(name) {\n        var _this = this;\n        this.name = name;\n        this.set = function (key) {\n            _this.data[key] = Date.now();\n        };\n        this.has = function (key) {\n            return typeof _this.data[key] !== 'undefined';\n        };\n        this.delete = function (key) {\n            if (_this.has(key)) {\n                delete _this.data[key];\n            }\n        };\n        this.keys = function () {\n            return _this.data;\n        };\n        this.empty = function () {\n            _this.data = {};\n        };\n        this.data = {};\n    }\n    return CacheData;\n}());\nexports.CacheFactory = function ($delegate) {\n    var caches = {};\n    function getCacheFactory() {\n        var $cacheFactory = function (cacheId, options) {\n            var cache;\n            try {\n                cache = $delegate(cacheId, options);\n            }\n            catch (e) {\n                cache = $delegate.get(cacheId);\n            }\n            var Oput = cache.put;\n            var Oremove = cache.remove;\n            cache.put = function (key, value) {\n                caches[cacheId].set(key);\n                Oput.apply(cache, [key, value]);\n            };\n            cache.remove = function (key) {\n                caches[cacheId].delete(key);\n                Oremove.apply(cache, [key]);\n            };\n            caches[cacheId] = new CacheData(cacheId);\n            return cache;\n        };\n        $cacheFactory.prototype = $delegate.prototype;\n        $cacheFactory.export = function (cacheId) {\n            if (typeof caches[cacheId] === 'undefined') {\n                throw new Error('$cacheFactory - iid - CacheId ' + cacheId + ' is not defined!');\n            }\n            var data = {};\n            var cache = caches[cacheId];\n            var storedCache = $delegate.get(cacheId);\n            var keys = cache.keys();\n            for (var key in keys) {\n                data[key] = storedCache.get(key);\n            }\n            return data;\n        };\n        $cacheFactory.exportAll = function () {\n            var data = {};\n            for (var cacheId in caches) {\n                data[cacheId] = $cacheFactory.export(cacheId);\n            }\n            return data;\n        };\n        $cacheFactory.import = function (cacheId, data) {\n            if (typeof caches[cacheId] === 'undefined') {\n                $cacheFactory(cacheId, {});\n            }\n            var storedCache = $delegate.get(cacheId);\n            for (var key in data) {\n                storedCache.put(key, data[key]);\n            }\n        };\n        $cacheFactory.importAll = function (data) {\n            for (var key in data) {\n                $cacheFactory.import(key, data[key]);\n            }\n        };\n        $cacheFactory.delete = function (cacheId) {\n            if (typeof caches[cacheId] !== 'undefined') {\n                var storedCache = $delegate.get(cacheId);\n                storedCache.removeAll();\n                storedCache.destroy();\n                delete caches[cacheId];\n            }\n        };\n        $cacheFactory.get = $delegate.get;\n        $cacheFactory.info = $delegate.info;\n        return $cacheFactory;\n    }\n    return getCacheFactory();\n};\nexports.TemplateCache = function ($cacheFactory) {\n    return $cacheFactory('templates');\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/cacheFactory.ts\n ** module id = 6\n ** module chunks = 0\n **/","\"use strict\";\nvar ServerConfigFactory = function ($window) {\n    var initialized = false;\n    var httpCache = true;\n    var restServer = null;\n    var restCacheEnabled = false;\n    var timeoutValue = 200;\n    var server = false;\n    var uid = null;\n    var socketServer = null;\n    var restCache = null;\n    var debug = false;\n    var init = function () {\n        if (initialized)\n            return;\n        initialized = true;\n        if (angular.isDefined($window['onServer']) && $window['onServer'] === true) {\n            server = true;\n        }\n        if (angular.isDefined($window['serverConfig'])) {\n            if (angular.isDefined($window['serverConfig'].clientTimeoutValue)) {\n                timeoutValue = $window['serverConfig'].clientTimeoutValue;\n            }\n            if (angular.isDefined($window['serverConfig'].restServerURL)) {\n                restServer = $window['serverConfig'].restServerURL;\n            }\n            if (angular.isDefined($window['serverConfig'].uid)) {\n                uid = $window['serverConfig'].uid;\n            }\n            if (angular.isDefined($window['serverConfig'].socketServerURL)) {\n                socketServer = $window['serverConfig'].socketServerURL;\n            }\n            if (angular.isDefined($window['ngServerCache'])) {\n                restCache = $window['ngServerCache'];\n            }\n            if (angular.isDefined($window['serverConfig'].debug)) {\n                debug = $window['serverConfig'].debug;\n            }\n            if (angular.isDefined($window['serverConfig'].httpCache)) {\n                httpCache = $window['serverConfig'].httpCache;\n            }\n            if (angular.isDefined($window['serverConfig'].restCache)) {\n                restCacheEnabled = $window['serverConfig'].restCache;\n            }\n        }\n        if (server && (socketServer === null || uid === null)) {\n            console.error($window['serverConfig']);\n            throw new Error('invalid serverConfig: uid, socketServer missing ');\n        }\n    };\n    var hasRestCache = function () {\n        return restCache !== null;\n    };\n    var onServer = function () {\n        return server;\n    };\n    var getDebug = function () {\n        return debug;\n    };\n    var getDefaultHttpCache = function () {\n        return httpCache;\n    };\n    var getRestCacheEnabled = function () {\n        return restCacheEnabled;\n    };\n    var getRestServer = function () {\n        return restServer;\n    };\n    var getSocketServer = function () {\n        return socketServer;\n    };\n    var getTimeoutValue = function () {\n        return timeoutValue;\n    };\n    var getUID = function () {\n        return uid;\n    };\n    var getRestCache = function () {\n        return restCache;\n    };\n    var setDefaultHtpCache = function (value) {\n        httpCache = value;\n    };\n    var setRestServer = function (value) {\n        restServer = value;\n    };\n    var setTimeoutValue = function (value) {\n        timeoutValue = value;\n    };\n    return {\n        init: init,\n        hasRestCache: hasRestCache,\n        onServer: onServer,\n        getDebug: getDebug,\n        getDefaultHttpCache: getDefaultHttpCache,\n        getRestCache: getRestCache,\n        getRestCacheEnabled: getRestCacheEnabled,\n        getRestServer: getRestServer,\n        getSocketServer: getSocketServer,\n        getTimeoutValue: getTimeoutValue,\n        getUID: getUID,\n        setDefaultHtpCache: setDefaultHtpCache,\n        setRestServer: setRestServer,\n        setTimeoutValue: setTimeoutValue\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = ServerConfigFactory;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/serverConfig.ts\n ** module id = 7\n ** module chunks = 0\n **/","\"use strict\";\nvar SocketFactory = function ($window, serverConfigHelper) {\n    serverConfigHelper.init();\n    var socket;\n    var queueEmit = [];\n    var queueOn = [];\n    var connected = false;\n    var init = function () {\n        if (typeof $window['io'] !== 'undefined') {\n            connect();\n        }\n        else {\n            var script = $window.document.createElement('script');\n            $window.document.head.appendChild(script);\n            script.onload = function () {\n                if (typeof $window['io'] === 'undefined') {\n                    throw new Error('It seems IO didnt load inside ngApp');\n                }\n                connect();\n            };\n            script.src = serverConfigHelper.getSocketServer() + '/socket.io/socket.io.js';\n        }\n    };\n    var connect = function () {\n        socket = window['io'].connect(serverConfigHelper.getSocketServer() + '?token=' + serverConfigHelper.getUID());\n        socket.on('connect', function () {\n            connected = true;\n            var elem;\n            while (elem = queueEmit.shift()) {\n                emit(elem.key, elem.value);\n            }\n            while (elem = queueOn.shift()) {\n                on(elem.key, elem.cb);\n            }\n        });\n        socket.on('connect_timeout', function (err) {\n            console.log('connect_timeout', err);\n        });\n        socket.on('connect_error', function (err) {\n            console.log('connect_error', err);\n        });\n    };\n    var emit = function (key, value) {\n        value = Object.assign({}, { uid: serverConfigHelper.getUID() }, value);\n        if (!connected) {\n            queueEmit.push({ key: key, value: value });\n        }\n        else {\n            socket.emit(key, value);\n        }\n    };\n    var on = function (key, cb) {\n        if (!connected) {\n            queueOn.push({ key: key, cb: cb });\n        }\n        else {\n            socket.on(key, cb);\n        }\n    };\n    return {\n        init: init,\n        emit: emit,\n        on: on\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = SocketFactory;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/Socket.ts\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\nvar ExceptionHandler = function ($delegate, $log, $window) {\n    var Event = $window['Event'];\n    var dispatchEvent = $window.dispatchEvent;\n    var IdleEvent = new Event('ExceptionHandler');\n    return function (exception, cause) {\n        dispatchEvent(IdleEvent);\n        $delegate(exception, cause);\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = ExceptionHandler;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/exceptionHandler.ts\n ** module id = 9\n ** module chunks = 0\n **/","\"use strict\";\nvar TemplateRequest = function ($delegate, $sce, serverConfigHelper) {\n    var $TemplateRequest = function (tpl, ignoreRequestError) {\n        var restURL = serverConfigHelper.getRestServer();\n        if (restURL !== null) {\n            if (typeof tpl === 'string') {\n                tpl = $sce.trustAsResourceUrl(restURL + '/get?url=' + encodeURIComponent(tpl));\n            }\n        }\n        var result = $delegate(tpl, ignoreRequestError);\n        return result;\n    };\n    return $TemplateRequest;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = TemplateRequest;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/decorator/templateRequest.ts\n ** module id = 10\n ** module chunks = 0\n **/","\"use strict\";\nvar WindowError = function ($rootScope, $window, serverConfigHelper) {\n    var init = function () {\n        if (serverConfigHelper.onServer() === false)\n            return;\n        var originalThrow = $window.throw;\n        var originalErrorHandler = $window.onerror;\n        if (!originalErrorHandler) {\n            originalErrorHandler = function mockHandler() {\n                return (true);\n            };\n        }\n        $window.onerror = function handleGlobalError(message, fileName, lineNumber, columnNumber, error) {\n            if (!error) {\n                error = new Error(message);\n                error.fileName = fileName;\n                error.lineNumber = lineNumber;\n                error.columnNumber = (columnNumber || 0);\n            }\n            $rootScope.exception = true;\n            return false;\n        };\n    };\n    return {\n        init: init\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = WindowError;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/factory/windowError.ts\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}